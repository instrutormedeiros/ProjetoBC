/* ==========================================================================
   1. VARIÁVEIS E RESET (PREMIUM / EXECUTIVO)
   ========================================================================== */
:root {
    /* Paleta de Cores Sóbria e Moderna */
    --primary: #c1121f; 
    --primary-dark: #8a0e15; 
    --secondary: #0f172a; /* Azul muito escuro/quase preto */
    --accent: #ea580c; /* Laranja queimado (menos neon) */
    
    --dark-text: #111827; 
    --light-text: #374151; 
    --light-bg: #f8fafc; /* Cinza muito suave */
    
    --success: #059669;
    --info-bg: #eff6ff; 
    --info-border: #bfdbfe; 
    --panel-bg: #ffffff; 
    --border-color: #e2e8f0;
    
    /* DESIGN SYSTEM PREMIUM (Bordas mais retas) */
    --radius-sm: 3px;
    --radius-md: 5px;
    --radius-lg: 8px;
    --radius-full: 9999px;
    
    --shadow-soft: 0 2px 5px rgba(0,0,0,0.04), 0 1px 2px rgba(0,0,0,0.06);
    --shadow-card: 0 4px 6px -1px rgba(0,0,0,0.05), 0 2px 4px -1px rgba(0,0,0,0.03);
    --shadow-hover: 0 10px 15px -3px rgba(0,0,0,0.08), 0 4px 6px -2px rgba(0,0,0,0.04);
}

.dark {
    --primary: #ef4444; 
    --primary-dark: #b91c1c; 
    --secondary: #1e293b; 
    --accent: #f97316;
    
    --dark-text: #f9fafb; 
    --light-text: #d1d5db; 
    --light-bg: #020617; /* Fundo deep dark */
    
    --success: #10b981;
    --info-bg: #172554; 
    --info-border: #1e40af; 
    --panel-bg: #111827; 
    --border-color: #374151;
}

body { 
    font-family: 'Lato', sans-serif; 
    scroll-behavior: smooth; 
    background-color: var(--light-bg); 
    color: var(--dark-text); 
    padding-bottom: 70px; 
    transition: background-color 0.3s, color 0.3s; 
    line-height: 1.6;
    -webkit-font-smoothing: antialiased;
}

h1, h2, h3, h4, h5 { font-family: 'Lora', serif; letter-spacing: -0.02em; }

/* ==========================================================================
   2. ANIMAÇÕES & EFEITOS ESPECIAIS
   ========================================================================== */
.floating { animation: floating 3s ease-in-out infinite; }
@keyframes floating { 
    0% { transform: translateY(0px); } 
    50% { transform: translateY(-5px); } 
    100% { transform: translateY(0px); } 
}

.pulse-button { animation: pulse-glow 2s infinite; }
@keyframes pulse-glow { 
    0% { box-shadow: 0 0 0 0 rgba(234, 88, 12, 0.4); } 
    70% { box-shadow: 0 0 0 6px rgba(234, 88, 12, 0); } 
    100% { box-shadow: 0 0 0 0 rgba(234, 88, 12, 0); } 
}

@keyframes slideInRight { from { transform: translateX(15px); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
.animate-slide-in { animation: slideInRight 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards; }

@keyframes gradient-x { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
.animate-gradient { animation: gradient-x 4s ease infinite; }

/* ANIMAÇÃO DEGRADÊ DOURADO - DESENVOLVEDOR */
.developer-credit {
    background: linear-gradient(to right, #854d0e, #facc15, #ca8a04, #facc15, #854d0e);
    background-size: 200% auto;
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    animation: shine-gold 3s linear infinite;
    font-weight: 800;
    letter-spacing: 0.5px;
    text-transform: uppercase;
    font-size: 0.75rem;
}
@keyframes shine-gold { to { background-position: 200% center; } }

/* ==========================================================================
   3. LAYOUT, HEADER & NAV
   ========================================================================== */
#main-header { 
    backdrop-filter: blur(16px); 
    -webkit-backdrop-filter: blur(16px); 
    border-bottom: 1px solid rgba(0,0,0,0.05);
    background-color: rgba(255, 255, 255, 0.85);
}
.dark #main-header { 
    border-bottom: 1px solid rgba(255,255,255,0.05); 
    background-color: rgba(17, 24, 39, 0.85);
}

#main-header.scrolled { 
    background-color: rgba(255, 255, 255, 0.95); 
    box-shadow: var(--shadow-soft);
}
.dark #main-header.scrolled { 
    background-color: rgba(11, 15, 25, 0.95); 
}

/* Sidebar */
#off-canvas-sidebar { background-color: var(--panel-bg); border-right: 1px solid var(--border-color); }
#off-canvas-sidebar.open { transform: translateX(0); }
.sidebar-overlay { transition: opacity 0.3s; }
.sidebar-overlay.show { opacity: 1; pointer-events: auto; }
.sidebar { 
    background: var(--panel-bg); 
    padding: 1.5rem; 
    border-radius: var(--radius-md); 
    border: 1px solid var(--border-color); 
    box-shadow: var(--shadow-soft);
}

/* Barra de Progresso Sticky */
.sticky-progress-wrapper {
    position: sticky; top: 5.5rem; z-index: 39; 
    padding: 0.75rem 0; 
    background-color: var(--light-bg);
    border-bottom: 1px solid var(--border-color);
    margin-bottom: 2rem;
    backdrop-filter: blur(10px);
}
@media (max-width: 1024px) { .sticky-progress-wrapper { top: 80px; } }

#progress-bar-minimal {
    position: absolute; bottom: 0; left: 0; width: 0%; height: 3px;        
    background: var(--accent);
    transition: width 0.5s ease; z-index: 40; 
}

/* ==========================================================================
   4. BOTÕES E COMPONENTES UI (PREMIUM LOOK)
   ========================================================================== */
.action-button {
  position: relative; overflow: hidden;
  background: linear-gradient(135deg, var(--primary), var(--accent));
  color: #fff; font-weight: 600; padding: 0.75rem 1.75rem;
  border-radius: var(--radius-sm); border: none; cursor: pointer;
  box-shadow: var(--shadow-soft);
  transition: all 0.2s ease;
  text-transform: uppercase; letter-spacing: 0.5px; font-size: 0.85rem;
}
.action-button:hover { 
    transform: translateY(-1px);
    box-shadow: var(--shadow-hover);
    filter: brightness(1.1);
}
.action-button:active { transform: scale(0.98); }
.action-button:disabled { background: #9ca3af; cursor: not-allowed; transform: none; box-shadow: none; }

.action-button .ripple {
  position: absolute; border-radius: 50%; transform: scale(0);
  animation: ripple-effect 0.6s linear; pointer-events: none;
  background: rgba(255, 255, 255, 0.3);
}
@keyframes ripple-effect { to { transform: scale(4); opacity: 0; } }

/* Botões do Drive */
.drive-button { 
    display: flex; align-items: center; justify-content: center; width: 100%; 
    padding: 1rem; margin: 1.5rem 0; 
    background: linear-gradient(135deg, #2563eb, #1d4ed8); 
    color: white; font-weight: 600; border-radius: var(--radius-md); 
    text-decoration: none; box-shadow: var(--shadow-soft); 
    transition: all 0.2s ease; border: 1px solid rgba(255,255,255,0.1);
}
.drive-button:hover { transform: translateY(-2px); box-shadow: var(--shadow-hover); }

/* Cartões e Paineis */
.tool-card {
    background: var(--panel-bg); 
    border: 1px solid var(--border-color); 
    border-radius: var(--radius-md); 
    padding: 1.5rem; 
    box-shadow: var(--shadow-card);
    transition: border-color 0.2s, transform 0.2s; 
}
.tool-card:hover { border-color: var(--accent); transform: translateY(-2px); }
.tool-title { font-size: 1.1rem; font-weight: 700; color: var(--dark-text); margin-bottom: 1rem; border-bottom: 1px solid var(--border-color); padding-bottom: 0.5rem; display: flex; align-items: center; gap: 0.5rem; }

/* Listas de Módulos (Accordion) */
.accordion-button { 
    width: 100%; text-align: left; 
    background-color: var(--panel-bg); 
    color: var(--dark-text); 
    padding: 1rem; 
    border: 1px solid var(--border-color); 
    border-radius: var(--radius-sm); 
    transition: all 0.2s ease; 
    display: flex; justify-content: space-between; align-items: center; font-weight: 700;
    margin-bottom: 0.5rem;
    box-shadow: var(--shadow-soft);
}
.accordion-button:hover { border-color: var(--accent); }
.accordion-button.active { border-left: 4px solid var(--accent); background-color: var(--light-bg); }
.accordion-panel { padding: 0 4px; max-height: 0; overflow: hidden; transition: max-height 0.4s ease-out; }

/* Itens da Lista de Módulos */
.module-list-item {
  padding: 0.85rem 1rem; margin: 4px 0; border-radius: var(--radius-sm);
  background: var(--panel-bg); 
  border: 1px solid var(--border-color);
  border-left: 3px solid transparent;
  cursor: pointer; transition: all 0.2s ease;
  display: flex; align-items: center; font-size: 0.9rem; color: var(--light-text); font-weight: 500;
}
.module-list-item:hover { 
    background-color: var(--light-bg); 
    border-left-color: var(--accent); 
    color: var(--dark-text); 
    transform: translateX(4px);
}
.module-list-item.active { 
    background-color: var(--info-bg); 
    border-left-color: var(--primary); 
    color: var(--primary); 
    font-weight: 700; 
    border-color: var(--info-border);
}
.dark .module-list-item.active { background-color: rgba(234, 88, 12, 0.1); color: var(--accent); border-left-color: var(--accent); border-color: var(--accent); }
.module-count {
    font-size: 0.75rem; font-weight: 600; color: #6b7280; background-color: #e5e7eb;
    padding: 2px 8px; border-radius: var(--radius-full); margin-left: auto; margin-right: 10px;
}
.dark .module-count { background-color: #374151; color: #d1d5db; }

/* Conteúdo */
#content-area { background-color: var(--panel-bg); padding: 2.5rem; border-radius: var(--radius-lg); border: 1px solid var(--border-color); box-shadow: var(--shadow-card); }
.key-concept, .warning-box { border-radius: var(--radius-sm); padding: 1.25rem; border-left-width: 4px; box-shadow: var(--shadow-soft); margin-bottom: 1.5rem; }
.key-concept { background-color: #f0f9ff; border-color: #0ea5e9; }
.dark .key-concept { background-color: #0c4a6e; border-color: #38bdf8; }
.warning-box { background-color: #fff7ed; border-color: #f97316; }
.dark .warning-box { background-color: #431407; border-color: #fb923c; }

/* Tabelas */
.custom-table { width: 100%; border-collapse: collapse; margin: 1.5rem 0; font-size: 0.9rem; }
.custom-table th, .custom-table td { border: 1px solid var(--border-color); padding: 0.75rem; text-align: left; }
.custom-table th { background-color: var(--light-bg); font-weight: 700; color: var(--dark-text); }

/* Inputs e Forms */
input[type="text"], input[type="email"], input[type="password"], textarea, select {
    border-radius: var(--radius-sm) !important;
    border-color: var(--border-color) !important;
    background-color: var(--panel-bg) !important;
    color: var(--dark-text) !important;
}
input:focus, textarea:focus, select:focus { border-color: var(--accent) !important; outline: none; ring: 1px var(--accent); }

/* ==========================================================================
   5. SIMULADO MODERNO (CORREÇÃO DE LAYOUT)
   ========================================================================== */
.simulado-header-modern {
    background-color: var(--panel-bg); 
    border: 1px solid var(--border-color);
    border-left: 4px solid var(--accent);
    border-radius: var(--radius-md);
    padding: 1rem 1.5rem;
    margin-bottom: 2rem; 
    display: flex;
    justify-content: space-between;
    align-items: center;
    color: var(--dark-text);
    box-shadow: var(--shadow-soft);
}

.sim-timer-box {
    display: flex; align-items: center; gap: 0.75rem; 
    font-family: 'Courier New', monospace;
    font-size: 1.2rem;
    font-weight: 800;
    color: var(--primary); 
    flex-shrink: 0;
}
.dark .sim-timer-box { color: var(--accent); }

.sim-count-badge {
    background-color: var(--light-bg);
    padding: 0.35rem 0.85rem;
    border-radius: var(--radius-sm);
    font-size: 0.85rem;
    font-weight: 700;
    color: var(--light-text);
    border: 1px solid var(--border-color);
}

/* Opções de Resposta - Estilo Cartão Premium */
.quiz-card-option {
    display: flex; align-items: center; padding: 1.25rem;
    border: 1px solid var(--border-color); 
    background-color: var(--panel-bg);
    border-radius: var(--radius-sm);
    margin-bottom: 0.75rem;
    cursor: pointer; transition: all 0.2s ease;
    position: relative;
    box-shadow: var(--shadow-soft);
}
.quiz-card-option:hover { 
    border-color: var(--accent); 
    background-color: var(--light-bg); 
    transform: translateX(4px);
}
.quiz-card-option.selected {
    border-color: var(--accent);
    background-color: rgba(234, 88, 12, 0.05); 
    box-shadow: inset 4px 0 0 var(--accent); 
}
.dark .quiz-card-option.selected { background-color: rgba(234, 88, 12, 0.15); }

.quiz-letter-box {
    width: 2.25rem; height: 2.25rem;
    border-radius: var(--radius-sm);
    background-color: var(--light-bg);
    color: var(--light-text);
    display: flex; align-items: center; justify-content: center;
    font-weight: 800; font-size: 1rem;
    margin-right: 1.25rem; flex-shrink: 0;
    border: 1px solid var(--border-color);
}
.quiz-card-option.selected .quiz-letter-box {
    background-color: var(--accent);
    color: white;
    border-color: var(--accent);
}

/* Opções de Quiz (Estilo Clássico dentro dos módulos) */
.quiz-option { 
    cursor: pointer; padding: 1rem; border-radius: var(--radius-sm); margin-bottom: 0.75rem; 
    transition: all 0.2s ease; background-color: var(--light-bg); border: 1px solid var(--border-color); 
    color: var(--dark-text); display: flex; align-items: flex-start;
}
.quiz-option:hover { border-color: var(--accent); transform: translateX(4px); }
.quiz-option.correct { background-color: var(--success) !important; color: white !important; border-color: var(--success) !important; }
.quiz-option.incorrect { background-color: var(--primary) !important; color: white !important; border-color: var(--primary) !important; }
.quiz-option.correct .option-key, .quiz-option.incorrect .option-key { color: white !important; }
.quiz-option .option-key { font-weight: 700; margin-right: 0.75rem; color: var(--secondary); }

/* ==========================================================================
   6. FUNCIONALIDADES ESPECÍFICAS (MODAL, FERRAMENTAS, RPG)
   ========================================================================== */
#back-to-top.action-button {
    border-radius: 50% !important; 
    width: 45px !important; height: 45px !important;
    background: var(--secondary); opacity: 0.9;
    bottom: 25px !important; right: 25px !important;
    box-shadow: var(--shadow-card);
}

#accessibility-fab {
    bottom: 85px; right: 25px; width: 45px; height: 45px;
    background-color: var(--accent); box-shadow: var(--shadow-card);
}

/* Modal Premium */
.modal { 
    background-color: var(--panel-bg); border-radius: var(--radius-lg) !important; 
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25); border: 1px solid var(--border-color);
}
.modal-overlay { background: rgba(0, 0, 0, 0.7); backdrop-filter: blur(8px); }

/* Jarra de Água */
.water-jar {
    width: 100px; height: 140px; background: rgba(255, 255, 255, 0.1); 
    border: 4px solid #cbd5e1; border-top: none; 
    border-radius: 4px 4px 30px 30px; /* Borda menos redonda */
    position: relative; overflow: hidden; margin: 0 auto; z-index: 1;
}
.dark .water-jar { border-color: #475569; }
.water-level {
    position: absolute; bottom: 0; left: 0; width: 100%; 
    background: linear-gradient(180deg, #3b82f6 0%, #1d4ed8 100%); 
    transition: height 0.8s ease; opacity: 0.9;
}
.water-handle { border-radius: 0 15px 15px 0; border-width: 5px; }

/* RPG Cards */
.rpg-card-btn {
    background-color: var(--panel-bg);
    border: 1px solid var(--border-color);
    border-left: 4px solid var(--primary);
    border-radius: var(--radius-sm);
    padding: 1.25rem; width: 100%; text-align: left;
    margin-bottom: 1rem; transition: all 0.2s;
    box-shadow: var(--shadow-soft);
}
.rpg-card-btn:hover { transform: translateX(4px); border-color: var(--accent); box-shadow: var(--shadow-hover); }

/* Audio Player */
.modern-audio-player {
    background-color: var(--panel-bg);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    padding: 0.5rem 1.25rem;
    display: flex; align-items: center; gap: 1rem;
    margin-bottom: 1.5rem;
    width: fit-content;
    box-shadow: var(--shadow-soft);
}
.audio-main-btn {
    background: none; border: none; color: var(--accent);
    font-weight: 700; font-size: 0.9rem; cursor: pointer;
    display: flex; align-items: center; gap: 0.5rem;
}
.audio-main-btn:hover { color: var(--primary); }
.audio-main-btn.playing { color: var(--primary); animation: pulse 1s infinite; }

/* Resultados e Feedback */
.circle-chart {
    width: 140px; height: 140px;
    background: conic-gradient(var(--accent) calc(var(--percentage) * 1%), var(--border-color) 0deg);
}
.result-progress-bar { background-color: var(--border-color); border-radius: var(--radius-full); }
.result-progress-fill { background-color: var(--primary); border-radius: var(--radius-full); }

.feedback-box { border-radius: var(--radius-sm); border: 1px solid var(--border-color); margin-bottom: 1.5rem; overflow: hidden; box-shadow: var(--shadow-soft); }
.feedback-header { padding: 1rem; font-weight: 700; background: var(--light-bg); border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; }
.feedback-body { padding: 1.25rem; background: var(--panel-bg); }
.answer-row { padding: 0.75rem; border-radius: var(--radius-sm); font-size: 0.9rem; margin-bottom: 6px; border: 1px solid transparent; }
.answer-row.correct-ref { background-color: rgba(16, 185, 129, 0.05); border-color: var(--success); border-left-width: 4px; }
.answer-row.user-wrong { background-color: rgba(239, 68, 68, 0.05); border-color: var(--primary); border-left-width: 4px; }

/* ID Card */
.bg-gradient-card { background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%); }
.card-shine { background: linear-gradient(125deg, rgba(255,255,255,0) 40%, rgba(255,255,255,0.05) 50%, rgba(255,255,255,0) 60%); }

/* Toasts */
.toast {
    background-color: var(--secondary); color: white;
    padding: 1rem 1.5rem; border-radius: var(--radius-sm);
    box-shadow: var(--shadow-card); display: flex; align-items: center;
    border-left: 4px solid var(--accent);
}

/* Scrollbar */
.custom-scrollbar::-webkit-scrollbar { width: 8px; }
.custom-scrollbar::-webkit-scrollbar-thumb { background: #94a3b8; border-radius: 4px; }
.dark .custom-scrollbar::-webkit-scrollbar-thumb { background: #475569; }

/* Ajustes Finais para Mobile */
@media (max-width: 1024px) {
    .main-content-container { padding-top: 10rem !important; }
    #main-header .container { padding-top: 0.5rem; padding-bottom: 0.5rem; }
    h1 { font-size: 1.5rem; }
}
