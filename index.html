<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Curso de Formação | Bombeiro Civil e Brigadista</title>
    
    <link rel="manifest" href="./manifest.json">
    <meta name="theme-color" content="#0b1220">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <link rel="apple-touch-icon" href="https://raw.githubusercontent.com/instrutormedeiros/ProjetoBravoCharlie/refs/heads/main/assets/img/LOGO_QUADRADA.png">
    <link rel="shortcut icon" href="https://raw.githubusercontent.com/instrutormedeiros/ProjetoBravoCharlie/refs/heads/main/assets/img/LOGO_QUADRADA.png" type="image/png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&family=Fira+Code:wght@400;500&family=Lora:wght@600;700&family=Lato:wght@400;700&display=swap" rel="stylesheet">

    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = { 
        darkMode: 'class',
        theme: {
            extend: {
                colors: {
                    darkCard: '#111827', 
                    brandOrange: '#ea580c', 
                    darkInput: '#1f2937'
                },
                fontFamily: {
                    sans: ['Inter', 'system-ui', 'sans-serif'],
                    mono: ['Fira Code', 'monospace'],
                    serif: ['Lora', 'serif']
                }
            }
        }
      }
    </script>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/driver.js@1.0.1/dist/driver.css"/>
    <script src="https://cdn.jsdelivr.net/npm/driver.js@1.0.1/dist/driver.js.iife.js"></script>

    <link rel="stylesheet" href="style.css">

    <style>
        /* =========================================
           CORREÇÃO CRÍTICA DE SCROLL E LAYOUT
           ========================================= */
        
        /* 1. PERMITE ROLAGEM NA PÁGINA PRINCIPAL */
        html, body {
            overflow-x: hidden; /* Evita rolagem lateral indesejada */
            overflow-y: auto !important; /* FORÇA a barra de rolagem vertical */
            background-color: #050505;
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
        }

        /* 2. CONTAINER DO CARROSSEL (TOPO) */
        #intro-carousel-wrapper {
            position: relative;
            width: 100%;
            height: 100vh; /* Ocupa exatamente 1 tela */
            overflow: hidden; /* O conteúdo interno não vaza */
            background-color: #050505;
            display: block;
            z-index: 50;
        }

        /* TRACK DO CARROSSEL (IMPORTANTE PARA O MOVIMENTO) */
        #carousel-track {
            display: flex;
            height: 100%;
            width: max-content; /* Permite que os itens fiquem lado a lado */
            will-change: transform;
        }

        /* 3. PAINÉIS INDIVIDUAIS */
        .epic-panel {
            position: relative;
            height: 100vh;
            flex-shrink: 0;
            border-right: 1px solid rgba(255,255,255,0.05);
            overflow: hidden;
            cursor: pointer;
            /* Largura será definida via classes Tailwind (w-[100vw] etc) */
        }
        
        .bg-image-zoom {
            transition: transform 1.5s cubic-bezier(0.19, 1, 0.22, 1);
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            filter: saturate(0.9) contrast(1.1);
        }
        
        .epic-panel:hover .bg-image-zoom {
            transform: scale(1.08); 
            filter: saturate(1.1) contrast(1.1);
        }

        .panel-content {
            transform: translateY(20px);
            opacity: 0.8;
            transition: all 0.5s ease;
        }

        .epic-panel:hover .panel-content {
            transform: translateY(0);
            opacity: 1;
        }

        /* 4. SETAS DE NAVEGAÇÃO */
        .nav-arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            cursor: pointer;
            z-index: 60; /* Acima de tudo no carrossel */
            transition: all 0.3s ease;
        }

        .nav-arrow:hover {
            background: rgba(234, 88, 12, 0.9);
            border-color: rgba(234, 88, 12, 1);
            transform: translateY(-50%) scale(1.1);
        }

        /* 5. SITE ABAIXO DO CARROSSEL */
        #site-legacy-container {
            position: relative;
            z-index: 10;
            background-color: #050a14;
            width: 100%;
            min-height: 100vh;
        }

        /* Correção para Modais aparecerem */
        .modal.show, .modal-overlay.show {
            display: flex !important;
            opacity: 1 !important;
            pointer-events: auto !important;
        }
    </style>
</head>
<body class="antialiased text-white">

    <div id="intro-carousel-wrapper">
        <div class="absolute inset-0 bg-radial-gradient pointer-events-none z-20" 
             style="background: radial-gradient(circle at center, transparent 0%, rgba(0,0,0,0.2) 60%, rgba(0,0,0,0.8) 100%);">
        </div>

        <button id="btn-prev" class="nav-arrow left-6 md:left-10">
            <i class="fas fa-chevron-left text-xl"></i>
        </button>
        <button id="btn-next" class="nav-arrow right-6 md:right-10">
            <i class="fas fa-chevron-right text-xl"></i>
        </button>

        <div class="h-full w-full">
            <div id="carousel-track">
                
                <div class="epic-panel w-[100vw] md:w-[33.333vw] group" onclick="scrollToSite()">
                    <div class="bg-image-zoom" style="background-image: url('https://raw.githubusercontent.com/instrutormedeiros/ProjetoBC/refs/heads/main/assets/img/BC.jpg');"></div>
                    <div class="absolute inset-0 bg-gradient-to-t from-black via-black/20 to-transparent opacity-90 group-hover:opacity-80 transition-opacity duration-500"></div>
                    <div class="absolute bottom-0 left-0 p-8 md:p-12 w-full z-30 panel-content">
                        <div class="w-12 h-1 bg-red-600 mb-6 shadow-[0_0_15px_rgba(220,38,38,0.6)]"></div>
                        <h2 class="text-4xl md:text-5xl font-black text-white uppercase tracking-tighter leading-[0.9] mb-4 drop-shadow-lg">
                            Bombeiro<br><span class="text-transparent bg-clip-text bg-gradient-to-r from-red-500 to-orange-500">Civil</span>
                        </h2>
                        <p class="text-gray-300 text-sm font-medium max-w-xs leading-relaxed border-l-2 border-gray-700 pl-4">Prevenção e combate a incêndio, resgate técnico e primeiros socorros.</p>
                    </div>
                </div>

                <div class="epic-panel w-[100vw] md:w-[33.333vw] group" onclick="scrollToSite()">
                    <div class="bg-image-zoom" style="background-image: url('https://raw.githubusercontent.com/instrutormedeiros/ProjetoBC/refs/heads/main/assets/img/SP.jpg');"></div>
                    <div class="absolute inset-0 bg-gradient-to-t from-black via-black/20 to-transparent opacity-90 group-hover:opacity-80 transition-opacity duration-500"></div>
                    <div class="absolute bottom-0 left-0 p-8 md:p-12 w-full z-30 panel-content">
                        <div class="w-12 h-1 bg-blue-600 mb-6 shadow-[0_0_15px_rgba(37,99,235,0.6)]"></div>
                        <h2 class="text-4xl md:text-5xl font-black text-white uppercase tracking-tighter leading-[0.9] mb-4 drop-shadow-lg">
                            Segurança<br><span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-500 to-cyan-500">Privada</span>
                        </h2>
                        <p class="text-gray-300 text-sm font-medium max-w-xs leading-relaxed border-l-2 border-gray-700 pl-4">Estratégias de vigilância e proteção de ativos de alto valor.</p>
                    </div>
                </div>

                <div class="epic-panel w-[100vw] md:w-[33.333vw] group" onclick="scrollToSite()">
                    <div class="bg-image-zoom" style="background-image: url('https://raw.githubusercontent.com/instrutormedeiros/ProjetoBC/refs/heads/main/assets/img/GE.jpg');"></div>
                    <div class="absolute inset-0 bg-gradient-to-t from-black via-black/20 to-transparent opacity-90 group-hover:opacity-80 transition-opacity duration-500"></div>
                    <div class="absolute bottom-0 left-0 p-8 md:p-12 w-full z-30 panel-content">
                        <div class="w-12 h-1 bg-purple-600 mb-6 shadow-[0_0_15px_rgba(147,51,234,0.6)]"></div>
                        <h2 class="text-4xl md:text-5xl font-black text-white uppercase tracking-tighter leading-[0.9] mb-4 drop-shadow-lg">
                            Gestão<br><span class="text-transparent bg-clip-text bg-gradient-to-r from-purple-500 to-fuchsia-500">& Liderança</span>
                        </h2>
                        <p class="text-gray-300 text-sm font-medium max-w-xs leading-relaxed border-l-2 border-gray-700 pl-4">Painel de controle para líderes de equipe.</p>
                    </div>
                </div>

                <div class="epic-panel w-[100vw] md:w-[33.333vw] group" onclick="scrollToSite()">
                    <div class="bg-image-zoom" style="background-image: url('https://raw.githubusercontent.com/instrutormedeiros/ProjetoBC/refs/heads/main/assets/img/INS8.png');"></div>
                    <div class="absolute inset-0 bg-gradient-to-t from-black via-black/20 to-transparent opacity-90 group-hover:opacity-80 transition-opacity duration-500"></div>
                    <div class="absolute bottom-0 left-0 p-8 md:p-12 w-full z-30 panel-content">
                        <div class="w-12 h-1 bg-emerald-500 mb-6 shadow-[0_0_15px_rgba(16,185,129,0.6)]"></div>
                        <h2 class="text-4xl md:text-5xl font-black text-white uppercase tracking-tighter leading-[0.9] mb-4 drop-shadow-lg">
                            Instrutor<br><span class="text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-green-600">de Cursos</span>
                        </h2>
                        <p class="text-gray-300 text-sm font-medium max-w-xs leading-relaxed border-l-2 border-gray-700 pl-4">Metodologia de ensino e oratória.</p>
                    </div>
                </div>

            </div>
        </div>

        <div class="absolute bottom-0 w-full h-1 bg-gray-900 z-40">
            <div class="h-full bg-brandOrange w-32 animate-pulse shadow-[0_0_10px_#ea580c]"></div>
        </div>
        <div class="absolute bottom-8 left-1/2 -translate-x-1/2 text-white animate-bounce z-40 cursor-pointer" onclick="scrollToSite()">
            <i class="fas fa-chevron-down text-3xl opacity-80 shadow-black drop-shadow-lg"></i>
        </div>
    </div>
<div id="site-legacy-container">
        
        <div id="landing-hero" class="relative w-full min-h-screen bg-[#050a14] custom-scrollbar transition-all duration-1000 ease-in-out font-sans overflow-hidden">
            
            <nav class="fixed top-0 left-0 w-full z-40 py-3 px-4 md:py-4 md:px-12 flex justify-between items-center bg-gradient-to-b from-black/90 to-transparent backdrop-blur-sm">
                <div class="flex items-center gap-3 md:gap-4">
                    <div class="leading-none">
                        <span class="block font-serif font-black italic text-xl md:text-2xl tracking-tight">
                            <span class="text-white">FOCO.</span><span class="text-orange-600">AÇÃO.</span>
                        </span>
                        <span class="block font-serif font-black italic text-xl md:text-2xl tracking-tight text-white mt-1">
                            RESULTADO.
                        </span>
                    </div>
                </div>
                
                <div class="flex items-center gap-3">
                    <button onclick="forceManagerOpen()" class="hidden md:flex items-center gap-2 text-gray-300 hover:text-white text-xs font-bold uppercase tracking-widest transition-colors mr-2">
                        <i class="fas fa-building text-orange-500"></i> Sou Gestor
                    </button>

                    <button onclick="forceStudentOpen()" class="group flex items-center gap-2 bg-white/5 hover:bg-orange-600 text-white px-4 py-2 md:px-6 md:py-2 rounded border border-white/10 hover:border-orange-500 transition-all duration-300 backdrop-blur-md">
                        <span class="text-[10px] md:text-xs font-bold uppercase tracking-widest">Área do Aluno</span>
                        <i class="fas fa-lock text-[10px] md:text-xs text-orange-500 group-hover:text-white transition-colors"></i>
                    </button>
                </div>
            </nav>

            <section class="relative min-h-screen flex flex-col items-center justify-center text-center px-4 pt-20">
                <div class="absolute inset-0 bg-[url('https://raw.githubusercontent.com/instrutormedeiros/ProjetoBC/refs/heads/main/assets/img/01.webp')] bg-cover bg-center md:bg-fixed grayscale-[30%] contrast-125 brightness-[0.4]"></div>
                <div class="absolute inset-0 bg-gradient-to-t from-[#050a14] via-transparent to-black/60"></div>

                <div class="relative z-10 max-w-7xl mx-auto flex flex-col items-center">
                    <div class="reveal-on-scroll opacity-0 translate-y-10 transition-all duration-1000 mb-6">
                        <span class="inline-block py-1 px-4 rounded border border-orange-500/50 bg-orange-500/10 text-orange-400 text-xs md:text-sm font-bold tracking-[0.4em] uppercase backdrop-blur-md shadow-[0_0_20px_rgba(234,88,12,0.3)]">
                            PROJETO
                        </span>
                    </div>

                    <div class="reveal-on-scroll opacity-0 scale-95 transition-all duration-1000 delay-200 overflow-visible">
                        <h1 class="text-5xl sm:text-7xl md:text-9xl font-black text-white mb-6 tracking-tighter uppercase italic leading-[0.9]" style="text-shadow: 0 10px 40px rgba(0,0,0,0.9);">
                            BRAVO <br class="md:hidden">
                            <span class="inline-block text-transparent bg-clip-text bg-gradient-to-t from-orange-600 to-orange-400 pr-6 md:pr-8">CHARLIE</span>
                        </h1>
                    </div>

                    <div class="reveal-on-scroll opacity-0 translate-y-10 transition-all duration-1000 delay-400 w-full px-2">
                        <p class="text-lg sm:text-xl md:text-2xl text-gray-300 font-light max-w-3xl mx-auto leading-relaxed drop-shadow-md border-l-4 border-orange-600 pl-6 text-left md:text-center md:border-l-0 md:border-b-4 md:pb-4 md:pl-0">
                            "A dor é temporária. O orgulho de pertencer à elite é para sempre."
                        </p>
                    </div>
                    
                    <button onclick="scrollToNextSection()" class="mt-16 md:mt-24 animate-bounce p-4 group">
                        <div class="w-10 h-14 border-2 border-white/20 rounded-full flex justify-center pt-2 group-hover:border-orange-500 transition-colors">
                            <div class="w-1 h-3 bg-white/50 rounded-full animate-scroll-down group-hover:bg-orange-500"></div>
                        </div>
                    </button>
                </div>
            </section>
            
            <section id="features-section" class="bg-[#050a14] py-20 px-4 relative">
                <div class="max-w-7xl mx-auto">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="group relative h-[400px] rounded-xl overflow-hidden border border-white/10 hover:border-orange-500/50 transition-all duration-500 reveal-on-scroll opacity-0 translate-y-10">
                            <div class="absolute inset-0 bg-[url('https://github.com/instrutormedeiros/ProjetoBC/blob/main/assets/img/2.webp?raw=true')] bg-cover bg-center transition-transform duration-700 group-hover:scale-110 grayscale group-hover:grayscale-0"></div>
                            <div class="absolute inset-0 bg-gradient-to-t from-black via-black/50 to-transparent opacity-90 group-hover:opacity-80 transition-opacity"></div>
                            <div class="absolute bottom-0 left-0 p-8 w-full">
                                <div class="w-12 h-12 bg-orange-600 flex items-center justify-center rounded mb-4 text-white text-xl font-bold shadow-lg">01</div>
                                <h3 class="text-2xl font-bold text-white mb-2 uppercase italic">Técnica</h3>
                                <p class="text-gray-400 text-sm">Domínio absoluto dos equipamentos e protocolos.</p>
                            </div>
                        </div>

                        <div class="group relative h-[400px] rounded-xl overflow-hidden border border-white/10 hover:border-orange-500/50 transition-all duration-500 reveal-on-scroll opacity-0 translate-y-10 delay-200">
                            <div class="absolute inset-0 bg-[url('https://github.com/instrutormedeiros/ProjetoBC/blob/main/assets/img/3.webp?raw=true')] bg-cover bg-center transition-transform duration-700 group-hover:scale-110 grayscale group-hover:grayscale-0"></div>
                            <div class="absolute inset-0 bg-gradient-to-t from-black via-black/50 to-transparent opacity-90 group-hover:opacity-80 transition-opacity"></div>
                            <div class="absolute bottom-0 left-0 p-8 w-full">
                                <div class="w-12 h-12 bg-blue-600 flex items-center justify-center rounded mb-4 text-white text-xl font-bold shadow-lg">02</div>
                                <h3 class="text-2xl font-bold text-white mb-2 uppercase italic">Prontidão</h3>
                                <p class="text-gray-400 text-sm">Reação imediata e eficiente sob pressão.</p>
                            </div>
                        </div>

                        <div class="group relative h-[400px] rounded-xl overflow-hidden border border-white/10 hover:border-orange-500/50 transition-all duration-500 reveal-on-scroll opacity-0 translate-y-10 delay-300">
                            <div class="absolute inset-0 bg-[url('https://github.com/instrutormedeiros/ProjetoBC/blob/main/assets/img/4.webp?raw=true')] bg-cover bg-center transition-transform duration-700 group-hover:scale-110 grayscale group-hover:grayscale-0"></div>
                            <div class="absolute inset-0 bg-gradient-to-t from-black via-black/50 to-transparent opacity-90 group-hover:opacity-80 transition-opacity"></div>
                            <div class="absolute bottom-0 left-0 p-8 w-full">
                                <div class="w-12 h-12 bg-white text-black flex items-center justify-center rounded mb-4 text-xl font-bold shadow-lg">03</div>
                                <h3 class="text-2xl font-bold text-white mb-2 uppercase italic">Liderança</h3>
                                <p class="text-gray-400 text-sm">Gerencie o caos e traga sua equipe em segurança.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="bg-[#050a14] py-24 px-4 overflow-hidden relative">
                <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[400px] bg-orange-600/10 rounded-full blur-[150px] pointer-events-none"></div>

                <div class="max-w-5xl mx-auto text-center relative z-10">
                    <div class="reveal-on-scroll opacity-0 translate-y-10 transition-all duration-1000">
                        <h2 class="text-3xl md:text-5xl font-bold text-white mb-4 uppercase">
                            A Plataforma de <span class="text-orange-600">Elite</span>
                        </h2>
                        <p class="text-gray-400 max-w-2xl mx-auto mb-16">
                            Tecnologia e metodologia unidas para forjar os melhores profissionais do mercado.
                        </p>
                    </div>

                    <div class="laptop-wrapper w-full max-w-4xl mx-auto h-[250px] md:h-[450px] relative">
                        <div id="notebook-tap-hint" class="md:hidden absolute top-[40%] left-1/2 -translate-x-1/2 -translate-y-1/2 z-50 flex flex-col items-center cursor-pointer pointer-events-none transition-opacity duration-500">
                            <div class="relative">
                                <div class="w-12 h-12 bg-orange-600 rounded-full flex items-center justify-center shadow-[0_0_20px_rgba(234,88,12,0.6)] animate-bounce">
                                    <i class="fas fa-hand-pointer text-white text-xl"></i>
                                </div>
                                <div class="absolute inset-0 bg-orange-500 rounded-full animate-ping opacity-75"></div>
                            </div>
                            <span class="mt-3 text-white text-[10px] font-bold uppercase tracking-widest bg-black/60 px-3 py-1 rounded-full border border-white/10 backdrop-blur-md shadow-lg">
                                Toque para Abrir
                            </span>
                        </div>

                        <div id="laptop-lid" class="laptop-lid absolute top-0 left-[5%] md:left-[10%] w-[90%] md:w-[80%] h-[85%] bg-[#0a0a0a] rounded-t-xl border-[3px] border-gray-700 border-b-0 overflow-hidden shadow-2xl z-20 relative">
                            <div class="absolute top-0 left-0 w-full h-6 bg-[#0a0a0a] flex items-center justify-center z-30">
                                <div class="w-1.5 h-1.5 bg-gray-600 rounded-full"></div>
                            </div>
                            <div class="absolute top-6 left-0 w-full h-[calc(100%-24px)] bg-black overflow-hidden">
                                <img src="https://github.com/instrutormedeiros/ProjetoBC/blob/main/assets/img/TELA%20DA%20PLATAFORMA.png?raw=true" class="w-full h-full object-cover object-top opacity-95 hover:scale-105 transition-transform duration-1000">
                            </div>
                            <div class="absolute inset-0 bg-gradient-to-tr from-white/5 to-transparent pointer-events-none z-40"></div>
                        </div>

                        <div class="absolute bottom-0 left-0 w-full h-[15px] md:h-[25px] bg-gradient-to-b from-gray-700 to-gray-800 rounded-b-2xl z-30 shadow-[0_20px_70px_rgba(0,0,0,0.9)] border-t border-gray-600 relative">
                            <div class="absolute top-0 left-1/2 -translate-x-1/2 w-[150px] h-[10px] bg-gray-800/50 rounded-b-lg border-b border-white/10"></div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="bg-[#080b12] py-24 px-4 border-t border-white/5">
                <div class="max-w-3xl mx-auto">
                    <h2 class="text-3xl md:text-4xl font-bold text-center text-white mb-12 uppercase">
                        Perguntas <span class="text-orange-600">Frequentes</span>
                    </h2>

                    <div class="space-y-4">
                        <details class="group bg-[#0f1623] border border-gray-800 rounded-lg overflow-hidden transition-all duration-300 hover:border-orange-500/30 open:border-orange-500/50 open:bg-[#131a2a]">
                            <summary class="flex justify-between items-center p-6 cursor-pointer text-white font-bold select-none">
                                <span>O curso é 100% online?</span>
                                <i class="fas fa-chevron-down text-orange-500 transition-transform group-open:rotate-180"></i>
                            </summary>
                            <div class="px-6 pb-6 text-gray-400 leading-relaxed text-sm border-t border-white/5 pt-4">
                                Sim. A plataforma Bravo Charlie é um ambiente digital completo. Você terá acesso a aulas interativas, simulados táticos e ferramentas de gestão de estudo acessíveis de qualquer dispositivo (celular, tablet ou computador), 24 horas por dia.
                            </div>
                        </details>

                        <details class="group bg-[#0f1623] border border-gray-800 rounded-lg overflow-hidden transition-all duration-300 hover:border-orange-500/30 open:border-orange-500/50 open:bg-[#131a2a]">
                            <summary class="flex justify-between items-center p-6 cursor-pointer text-white font-bold select-none">
                                <span>Como funciona o acesso?</span>
                                <i class="fas fa-chevron-down text-orange-500 transition-transform group-open:rotate-180"></i>
                            </summary>
                            <div class="px-6 pb-6 text-gray-400 leading-relaxed text-sm border-t border-white/5 pt-4">
                                O acesso é imediato. Após a inscrição, você recebe suas credenciais exclusivas para entrar na "Área do Aluno". O sistema memoriza seu progresso, permitindo que você continue exatamente de onde parou, mesmo trocando de dispositivo.
                            </div>
                        </details>

                        <details class="group bg-[#0f1623] border border-gray-800 rounded-lg overflow-hidden transition-all duration-300 hover:border-orange-500/30 open:border-orange-500/50 open:bg-[#131a2a]">
                            <summary class="flex justify-between items-center p-6 cursor-pointer text-white font-bold select-none">
                                <span>Qual o diferencial da metodologia?</span>
                                <i class="fas fa-chevron-down text-orange-500 transition-transform group-open:rotate-180"></i>
                            </summary>
                            <div class="px-6 pb-6 text-gray-400 leading-relaxed text-sm border-t border-white/5 pt-4">
                                Focamos na realidade operacional. Não ensinamos apenas "o que fazer", mas "como pensar" sob pressão. Nossos simulados replicam cenários reais de emergência para testar sua tomada de decisão, não apenas sua memória.
                            </div>
                        </details>

                        <details class="group bg-[#0f1623] border border-gray-800 rounded-lg overflow-hidden transition-all duration-300 hover:border-orange-500/30 open:border-orange-500/50 open:bg-[#131a2a]">
                            <summary class="flex justify-between items-center p-6 cursor-pointer text-white font-bold select-none">
                                <span>Tenho suporte a dúvidas?</span>
                                <i class="fas fa-chevron-down text-orange-500 transition-transform group-open:rotate-180"></i>
                            </summary>
                            <div class="px-6 pb-6 text-gray-400 leading-relaxed text-sm border-t border-white/5 pt-4">
                                Absolutamente. Você conta com suporte técnico para a plataforma e suporte pedagógico para o conteúdo, garantindo que nenhuma dúvida atrapalhe sua evolução.
                            </div>
                        </details>
                    </div>
                </div>
            </section>

            <section class="py-24 px-4 text-center bg-[#050a14] relative overflow-hidden">
                <div class="absolute inset-0 bg-[radial-gradient(circle_at_bottom,_var(--tw-gradient-stops))] from-orange-900/20 via-[#050a14] to-[#050a14]"></div>
                <div class="relative z-10">
                    <h2 class="text-3xl md:text-5xl font-black text-white mb-8 uppercase italic leading-none">
                        Sua evolução não pode esperar
                    </h2>
                    <button onclick="forceStudentOpen()" class="relative inline-flex group items-center justify-center px-12 py-6 overflow-hidden font-bold text-white transition-all duration-300 bg-gradient-to-r from-orange-700 to-orange-600 rounded hover:from-orange-600 hover:to-orange-500 hover:shadow-[0_0_50px_rgba(234,88,12,0.4)] active:scale-95 transform hover:-translate-y-1">
                        <span class="relative flex items-center text-xl md:text-2xl tracking-widest uppercase">
                            ACESSAR SISTEMA <i class="fas fa-sign-in-alt ml-4 animate-pulse"></i>
                        </span>
                    </button>
                </div>
            </section>

            <div class="bg-black py-12 mt-0 border-t border-white/10 relative z-50 text-center px-4">
                <div class="mb-4 flex justify-center">
                    <img src="https://raw.githubusercontent.com/instrutormedeiros/ProjetoBravoCharlie/refs/heads/main/assets/img/LOGO_QUADRADA.png" class="w-8 h-8 grayscale opacity-40">
                </div>

                <p class="text-gray-500 text-[10px] md:text-xs uppercase tracking-[0.2em] font-bold mb-2">
                    Projeto Bravo Charlie © 2025
                </p>
                <p class="text-gray-600 text-[10px] md:text-xs uppercase tracking-[0.1em] font-mono">
                    CNPJ: 63.911.037/0001-91
                </p>
                <p class="text-gray-700 text-[9px] mt-2">
                    Todos os direitos reservados.
                </p>
                <div class="h-24 w-full"></div>
            </div>

        </div> 
    </div>
<div id="manager-fab" class="hidden fixed top-24 right-4 z-[9999] group animate-fade-in-up">
        <button onclick="if((window.__fbDB || window.fbDB) && typeof openManagerPanel === 'function'){ openManagerPanel(); } else { alert('Aguarde o carregamento do sistema...'); }" 
                class="flex items-center justify-center w-12 h-12 bg-purple-600 text-white rounded-full shadow-lg hover:bg-purple-500 hover:scale-110 transition-all duration-300 border-2 border-white/20">
            <i class="fas fa-chart-line text-xl"></i>
        </button>
        <span class="absolute right-14 top-1/2 -translate-y-1/2 bg-gray-900 text-white text-xs font-bold px-3 py-1.5 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none border border-white/10 shadow-xl">
            Painel Gestor
        </span>
    </div>

    <script src="quizzes.js" defer></script>
    <script src="data.js" defer></script>
    <script src="course.js" defer></script>
    <script src="tools_logic.js" defer></script> 
    <script src="firebase-init.js" defer></script>
    <script src="app_final.js" defer></script>
    
    <script type="text/javascript">
      (function(d, t) {
          var v = d.createElement(t), s = d.getElementsByTagName(t)[0];
          v.onload = function() {
            window.voiceflow.chat.load({
              verify: { projectID: '69247d068e3b774e5660d59d' },
              url: 'https://general-runtime.voiceflow.com',
              versionID: 'production',
              render: { mode: 'overlay' }, 
              voice: {
                url: "https://runtime-api.voiceflow.com"
              }
            }).then(() => {
                const checkChat = setInterval(() => {
                    const chatHost = document.getElementById('voiceflow-chat');
                    if (chatHost && chatHost.shadowRoot) {
                        clearInterval(checkChat);
                        const style = document.createElement('style');
                        style.textContent = `
                            @media (max-width: 768px) {
                                .vfrc-launcher {
                                    bottom: 110px !important; 
                                    left: 20px !important;
                                    right: auto !important;
                                    position: fixed !important;
                                    opacity: 0.6 !important;
                                    box-shadow: 0 4px 15px rgba(0,0,0,0.1) !important;
                                }
                                .vfrc-widget--chat {
                                    bottom: 110px !important; 
                                    height: 65vh !important; 
                                    width: 85vw !important;
                                    left: 20px !important;
                                    right: auto !important;
                                    border-radius: 16px !important;
                                }
                                .vfrc-widget.is-mobile {
                                    background: transparent !important;
                                    width: auto !important;
                                    height: auto !important;
                                    position: static !important;
                                }
                            }
                            .vfrc-launcher:active, .vfrc-launcher:hover { opacity: 1 !important; }
                        `;
                        chatHost.shadowRoot.appendChild(style);
                    }
                }, 500);
            });
          }
          v.src = "https://cdn.voiceflow.com/widget-next/bundle.mjs"; v.type = "text/javascript"; s.parentNode.insertBefore(v, s);
      })(document, 'script');
    </script>
    
    <script>
        // === 1. CONTROLE DE INTENÇÃO DE LOGIN ===
        window.authIntent = 'STUDENT'; // Padrão: Aluno

        // Função de Scroll Suave
        window.scrollToSite = function() {
            const legacyContainer = document.getElementById('site-legacy-container');
            if(legacyContainer) {
                legacyContainer.scrollIntoView({ behavior: 'smooth' });
            }
        };

        // Abertura Segura do Login de Aluno
        window.forceStudentOpen = function() {
            if (window.authIntent !== 'MANAGER') {
                window.authIntent = 'STUDENT';
                const title = document.getElementById('auth-title');
                if(title) title.innerText = "Acesso ao Sistema";
            }
            // Foca no login
            const intro = document.getElementById('intro-carousel-wrapper');
            if(intro) intro.style.display = 'none'; // Esconde carrossel para focar no login
            
            const loginModal = document.getElementById('name-prompt-modal');
            const overlay = document.getElementById('name-modal-overlay');
            
            if(loginModal && overlay) {
                loginModal.classList.add('show');
                overlay.classList.add('show');
                loginModal.style.display = 'flex';
                overlay.style.display = 'block';
            }
        };

        // Abertura Segura do Login de Gestor (Passo 1: Login, Passo 2: Painel)
        window.forceManagerOpen = function() {
            window.authIntent = 'MANAGER';
            const title = document.getElementById('auth-title');
            if(title) title.innerHTML = '<i class="fas fa-user-tie text-orange-500 mr-2"></i> Acesso Gestor';
            window.forceStudentOpen();
        };

        // === 2. INICIALIZAÇÃO GERAL ===
        document.addEventListener('DOMContentLoaded', () => {
            
            // A. MONITOR DE LOGIN (FIX "VERIFICANDO...")
            if(typeof firebase !== 'undefined' && firebase.auth) {
                firebase.auth().onAuthStateChanged((user) => {
                    if (user) {
                        console.log("✅ Usuário Autenticado (Supervisor).");
                        
                        // Fecha login
                        const loginModal = document.getElementById('name-prompt-modal');
                        const overlay = document.getElementById('name-modal-overlay');
                        if(loginModal) loginModal.classList.remove('show');
                        if(overlay) overlay.classList.remove('show');

                        // Roteamento
                        if (window.authIntent === 'MANAGER') {
                            openManagerPanelSafe();
                        } else {
                            // Garante que a capa suma para o aluno ver o curso
                            const landing = document.getElementById('landing-hero');
                            const carousel = document.getElementById('intro-carousel-wrapper');
                            if(landing) landing.classList.add('hidden');
                            if(carousel) carousel.style.display = 'none'; // Oculta carrossel ao entrar no app
                            document.body.classList.remove('landing-active');
                        }
                    }
                });
            }

            // B. CARROSSEL INFINITO (LÓGICA CORRIGIDA)
            const track = document.getElementById('carousel-track');
            const prevBtn = document.getElementById('btn-prev');
            const nextBtn = document.getElementById('btn-next');
            
            if (track && track.children.length > 0) {
                // Clona para efeito infinito
                const originalItems = Array.from(track.children);
                [...originalItems, ...originalItems].forEach(item => {
                    const clone = item.cloneNode(true);
                    clone.removeAttribute('id');
                    track.appendChild(clone);
                });

                let currentX = 0;
                let speed = 0.5;
                let isAnimating = true; 
                let itemWidth = 0;
                let totalOriginalWidth = 0;

                // Recalcula largura periodicamente para garantir que não seja 0
                function calculateDimensions() {
                    const firstItem = track.children[0];
                    if(firstItem && firstItem.offsetWidth > 0) {
                        itemWidth = firstItem.offsetWidth;
                        totalOriginalWidth = itemWidth * originalItems.length;
                    }
                }
                
                // Força cálculo inicial
                calculateDimensions();
                window.addEventListener('resize', calculateDimensions);
                
                // Tenta recalcular após 1s caso o carregamento de imagens atrase
                setTimeout(calculateDimensions, 1000);

                function animate() {
                    if (isAnimating && totalOriginalWidth > 0) {
                        currentX -= speed;
                        if (Math.abs(currentX) >= totalOriginalWidth) {
                            currentX = 0;
                        }
                        track.style.transform = `translate3d(${currentX}px, 0, 0)`;
                    }
                    requestAnimationFrame(animate);
                }
                requestAnimationFrame(animate);

                function moveCarousel(direction) {
                    isAnimating = false;
                    // Garante cálculo antes de mover
                    if(totalOriginalWidth === 0) calculateDimensions();

                    const targetMove = direction === 'next' ? -itemWidth : itemWidth;
                    const startX = currentX;
                    const duration = 600;
                    const startTime = performance.now();

                    function step(currentTime) {
                        const elapsed = currentTime - startTime;
                        const progress = Math.min(elapsed / duration, 1);
                        const ease = 1 - Math.pow(1 - progress, 4);
                        
                        currentX = startX + (targetMove * ease);
                        
                        if (Math.abs(currentX) >= totalOriginalWidth) {
                            if (direction === 'next') currentX += totalOriginalWidth;
                            else currentX -= totalOriginalWidth;
                        } else if (currentX > 0) {
                            currentX -= totalOriginalWidth;
                        }

                        track.style.transform = `translate3d(${currentX}px, 0, 0)`;

                        if (progress < 1) requestAnimationFrame(step);
                        else isAnimating = true;
                    }
                    requestAnimationFrame(step);
                }

                if(nextBtn) nextBtn.addEventListener('click', () => moveCarousel('next'));
                if(prevBtn) prevBtn.addEventListener('click', () => moveCarousel('prev'));
            }
        });

        // Função segura para abrir painel gestor
        function openManagerPanelSafe() {
            const managerModal = document.getElementById('manager-modal');
            const adminOverlay = document.getElementById('admin-modal-overlay'); 
            
            if (typeof openManagerPanel === 'function') {
                openManagerPanel();
            } else if (managerModal) {
                managerModal.classList.add('show');
                managerModal.style.display = 'flex';
                if(adminOverlay) {
                    adminOverlay.classList.add('show');
                    adminOverlay.style.display = 'block';
                }
            }
        }

        // === 3. WATCHDOG (DESTRAVA LOGIN LENTO) ===
        document.addEventListener('click', function(e) {
            if(e.target && e.target.id === 'login-button') {
                const btn = e.target;
                const originalHTML = 'ACESSAR PLATAFORMA <i class="fas fa-arrow-right ml-2"></i>';
                
                setTimeout(() => {
                    if(btn.innerText.includes('Verificando') || btn.disabled) {
                        btn.disabled = false;
                        btn.innerHTML = originalHTML;
                        btn.classList.remove('cursor-not-allowed', 'opacity-50');
                        
                        // Se já logou no back, recarrega a página para entrar
                        if(firebase.auth().currentUser) {
                             window.location.reload();
                        } else {
                            const feedback = document.getElementById('auth-feedback');
                            if(feedback) feedback.innerText = "Login demorou. Tente novamente.";
                        }
                    }
                }, 8000); 
            }
        });
    </script>
</body>
</html>
