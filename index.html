<!DOCTYPE html>
<html lang="pt-BR" class="">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Curso de Formação | Bombeiro Civil e Brigadista</title>
    
    <!-- PWA e Meta Tags Originais -->
    <link rel="manifest" href="./manifest.json">
    <meta name="theme-color" content="#0b1220">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="https://raw.githubusercontent.com/instrutormedeiros/ProjetoBravoCharlie/refs/heads/main/assets/img/LOGO_QUADRADA.png">
    <link rel="shortcut icon" href="https://raw.githubusercontent.com/instrutormedeiros/ProjetoBravoCharlie/refs/heads/main/assets/img/LOGO_QUADRADA.png" type="image/png">
    
    <!-- Bibliotecas Externas (FontAwesome e Tailwind) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Configuração Tailwind Unificada (Carrossel + Site Antigo) -->
    <script>
      tailwind.config = {
        darkMode: 'class',
        theme: {
            extend: {
                colors: {
                    brandOrange: '#ea580c',
                    darkCard: '#111827',
                    darkInput: '#1f2937'
                },
                fontFamily: {
                    sans: ['Inter', 'system-ui', 'sans-serif'],
                    mono: ['Fira Code', 'monospace'],
                }
            }
        }
      }
    </script>

    <!-- CSS do Site Antigo (Link externo mantido) -->
    <link rel="stylesheet" href="style.css">

    <!-- Estilos Específicos do Carrossel (Isolados para não quebrar o site) -->
    <style>
        /* Container que segura o carrossel no topo */
        #intro-carousel-wrapper {
            position: relative;
            width: 100%;
            height: 100vh; /* Ocupa a tela inteira */
            overflow: hidden; /* Mantém a lógica do carrossel */
            background-color: #050505;
            cursor: pointer; /* Indica clique */
            z-index: 50;
        }

        /* --- INÍCIO CSS DO CARROSSEL (PRESERVADO DO ARQUIVO ORIGINAL) --- */
        
        /* Vinheta */
        #intro-carousel-wrapper .vignette {
            position: absolute;
            inset: 0;
            background: radial-gradient(circle at center, transparent 0%, rgba(0,0,0,0.2) 60%, rgba(0,0,0,0.8) 100%);
            pointer-events: none;
            z-index: 20;
        }

        /* Painel e Zoom */
        #intro-carousel-wrapper .epic-panel {
            position: relative;
            height: 100vh; /* Forçando altura total */
            flex-shrink: 0;
            border-right: 1px solid rgba(255,255,255,0.05);
            overflow: hidden;
            /* cursor: pointer; Já está no pai */
        }
        
        #intro-carousel-wrapper .bg-image-zoom {
            transition: transform 1.5s cubic-bezier(0.19, 1, 0.22, 1);
            will-change: transform;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            filter: saturate(0.9) contrast(1.1);
        }
        
        #intro-carousel-wrapper .epic-panel:hover .bg-image-zoom {
            transform: scale(1.08); 
            filter: saturate(1.1) contrast(1.1);
        }

        /* Conteúdo do Painel */
        #intro-carousel-wrapper .panel-content {
            transform: translateY(20px);
            opacity: 0.8;
            transition: all 0.5s ease;
        }

        #intro-carousel-wrapper .epic-panel:hover .panel-content {
            transform: translateY(0);
            opacity: 1;
        }

        /* Botões Glassmorphism */
        #intro-carousel-wrapper .nav-arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            cursor: pointer;
            z-index: 50;
            transition: all 0.3s ease;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
        }

        #intro-carousel-wrapper .nav-arrow:hover {
            background: rgba(234, 88, 12, 0.9);
            border-color: rgba(234, 88, 12, 1);
            box-shadow: 0 0 20px rgba(234, 88, 12, 0.4);
            transform: translateY(-50%) scale(1.1);
        }

        /* Animações das setas */
        @keyframes driftLeft { 0%, 100% { transform: translate(0, -50%); } 50% { transform: translate(-8px, -50%); } }
        @keyframes driftRight { 0%, 100% { transform: translate(0, -50%); } 50% { transform: translate(8px, -50%); } }

        .arrow-left-anim { animation: driftLeft 3s infinite ease-in-out; }
        .arrow-right-anim { animation: driftRight 3s infinite ease-in-out; }
        #intro-carousel-wrapper .nav-arrow:hover { animation: none; }

        /* Track do Carrossel */
        #carousel-track {
            display: flex;
            height: 100%;
            width: max-content;
            will-change: transform;
        }
        /* --- FIM CSS DO CARROSSEL --- */

        /* Estilo para o container do site antigo */
        #main-site-wrapper {
            position: relative;
            z-index: 40;
            background-color: var(--light-bg); /* Garante fundo correto */
        }
    </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-gray-100 transition-colors duration-300 antialiased overflow-x-hidden">

    <!-- 
    ================================================================
    PARTE 1: O CARROSSEL (INTRODUÇÃO)
    Este bloco contém todo o código do seu carrossel original.
    ================================================================ 
    -->
    <div id="intro-carousel-wrapper" title="Clique em qualquer lugar para entrar no site">
        <div class="relative w-full h-full bg-black overflow-hidden">
        
            <div class="vignette"></div>
    
            <!-- Nota: stopPropagation nas setas para permitir navegação sem descer a tela imediatamente se não quiser -->
            <button id="btn-prev" class="nav-arrow left-6 md:left-10 arrow-left-anim" onclick="event.stopPropagation()">
                <i class="fas fa-chevron-left text-xl"></i>
            </button>
            <button id="btn-next" class="nav-arrow right-6 md:right-10 arrow-right-anim" onclick="event.stopPropagation()">
                <i class="fas fa-chevron-right text-xl"></i>
            </button>
    
            <div class="h-full w-full">
                <div id="carousel-track">
                    
                    <!-- Slide 1: BC -->
                    <div class="epic-panel w-[100vw] md:w-[33.333vw] group" onclick="selectCourse('BC')">
                        <div class="bg-image-zoom" style="background-image: url('https://raw.githubusercontent.com/instrutormedeiros/ProjetoBC/refs/heads/main/assets/img/BC.jpg');"></div>
                        <div class="absolute inset-0 bg-gradient-to-t from-black via-black/20 to-transparent opacity-90 group-hover:opacity-80 transition-opacity duration-500"></div>
                        
                        <div class="absolute bottom-0 left-0 p-8 md:p-12 w-full z-30 panel-content">
                            <div class="w-12 h-1 bg-red-600 mb-6 shadow-[0_0_15px_rgba(220,38,38,0.6)]"></div>
                            <div class="flex items-center gap-3 mb-3">
                                <i class="fas fa-fire-extinguisher text-2xl text-red-500"></i>
                                <span class="text-xs font-mono text-red-500 uppercase tracking-widest border border-red-500/30 px-2 py-1 rounded bg-red-500/10 backdrop-blur-sm">Formação Técnica</span>
                            </div>
                            <h2 class="text-4xl md:text-5xl font-black text-white uppercase tracking-tighter leading-[0.9] mb-4 drop-shadow-lg">
                                Bombeiro<br><span class="text-transparent bg-clip-text bg-gradient-to-r from-red-500 to-orange-500">Civil</span>
                            </h2>
                            <p class="text-gray-300 text-sm font-medium max-w-xs leading-relaxed border-l-2 border-gray-700 pl-4">
                                Prevenção e combate a incêndio, resgate técnico e primeiros socorros. A elite da segurança.
                            </p>
                        </div>
                    </div>
    
                    <!-- Slide 2: SP -->
                    <div class="epic-panel w-[100vw] md:w-[33.333vw] group" onclick="selectCourse('SP')">
                        <div class="bg-image-zoom" style="background-image: url('https://raw.githubusercontent.com/instrutormedeiros/ProjetoBC/refs/heads/main/assets/img/SP.jpg');"></div>
                        <div class="absolute inset-0 bg-gradient-to-t from-black via-black/20 to-transparent opacity-90 group-hover:opacity-80 transition-opacity duration-500"></div>
                        
                        <div class="absolute bottom-0 left-0 p-8 md:p-12 w-full z-30 panel-content">
                            <div class="w-12 h-1 bg-blue-600 mb-6 shadow-[0_0_15px_rgba(37,99,235,0.6)]"></div>
                            <div class="flex items-center gap-3 mb-3">
                                <i class="fas fa-shield-alt text-2xl text-blue-500"></i>
                                <span class="text-xs font-mono text-blue-500 uppercase tracking-widest border border-blue-500/30 px-2 py-1 rounded bg-blue-500/10 backdrop-blur-sm">Tático Operacional</span>
                            </div>
                            <h2 class="text-4xl md:text-5xl font-black text-white uppercase tracking-tighter leading-[0.9] mb-4 drop-shadow-lg">
                                Segurança<br><span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-500 to-cyan-500">Privada</span>
                            </h2>
                            <p class="text-gray-300 text-sm font-medium max-w-xs leading-relaxed border-l-2 border-gray-700 pl-4">
                                Estratégias de vigilância, controle de acesso e proteção de ativos de alto valor.
                            </p>
                        </div>
                    </div>
    
                    <!-- Slide 3: GE -->
                    <div class="epic-panel w-[100vw] md:w-[33.333vw] group" onclick="selectCourse('GE')">
                        <div class="bg-image-zoom" style="background-image: url('https://raw.githubusercontent.com/instrutormedeiros/ProjetoBC/refs/heads/main/assets/img/GE.jpg');"></div>
                        <div class="absolute inset-0 bg-gradient-to-t from-black via-black/20 to-transparent opacity-90 group-hover:opacity-80 transition-opacity duration-500"></div>
                        
                        <div class="absolute bottom-0 left-0 p-8 md:p-12 w-full z-30 panel-content">
                            <div class="w-12 h-1 bg-purple-600 mb-6 shadow-[0_0_15px_rgba(147,51,234,0.6)]"></div>
                            <div class="flex items-center gap-3 mb-3">
                                <i class="fas fa-chart-line text-2xl text-purple-500"></i>
                                <span class="text-xs font-mono text-purple-500 uppercase tracking-widest border border-purple-500/30 px-2 py-1 rounded bg-purple-500/10 backdrop-blur-sm">Administrativo</span>
                            </div>
                            <h2 class="text-4xl md:text-5xl font-black text-white uppercase tracking-tighter leading-[0.9] mb-4 drop-shadow-lg">
                                Gestão<br><span class="text-transparent bg-clip-text bg-gradient-to-r from-purple-500 to-fuchsia-500">& Liderança</span>
                            </h2>
                            <p class="text-gray-300 text-sm font-medium max-w-xs leading-relaxed border-l-2 border-gray-700 pl-4">
                                Painel de controle para líderes de equipe. Monitore métricas e desempenho em tempo real.
                            </p>
                        </div>
                    </div>
    
                    <!-- Slide 4: INS -->
                    <div class="epic-panel w-[100vw] md:w-[33.333vw] group" onclick="selectCourse('INS')">
                        <div class="bg-image-zoom" style="background-image: url('https://raw.githubusercontent.com/instrutormedeiros/ProjetoBC/refs/heads/main/assets/img/INS8.png');"></div>
                        <div class="absolute inset-0 bg-gradient-to-t from-black via-black/20 to-transparent opacity-90 group-hover:opacity-80 transition-opacity duration-500"></div>
                        
                        <div class="absolute bottom-0 left-0 p-8 md:p-12 w-full z-30 panel-content">
                            <div class="w-12 h-1 bg-emerald-500 mb-6 shadow-[0_0_15px_rgba(16,185,129,0.6)]"></div>
                            <div class="flex items-center gap-3 mb-3">
                                <i class="fas fa-chalkboard-user text-2xl text-emerald-500"></i>
                                <span class="text-xs font-mono text-emerald-500 uppercase tracking-widest border border-emerald-500/30 px-2 py-1 rounded bg-emerald-500/10 backdrop-blur-sm">Docência</span>
                            </div>
                            <h2 class="text-4xl md:text-5xl font-black text-white uppercase tracking-tighter leading-[0.9] mb-4 drop-shadow-lg">
                                Instrutor<br><span class="text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-green-600">de Cursos</span>
                            </h2>
                            <p class="text-gray-300 text-sm font-medium max-w-xs leading-relaxed border-l-2 border-gray-700 pl-4">
                                Metodologia de ensino, oratória e técnicas avançadas para formar profissionais de elite.
                            </p>
                        </div>
                    </div>
    
                </div>
            </div>
    
            <div class="absolute bottom-0 w-full h-1 bg-gray-900 z-40">
                <div class="h-full bg-brandOrange w-32 animate-pulse shadow-[0_0_10px_#ea580c]"></div>
            </div>
        </div>
    </div>

    <!-- 
    ================================================================
    PARTE 2: O SITE ANTIGO (CONTEÚDO PRINCIPAL)
    Este bloco contém TODO o código do seu site original, encapsulado.
    ================================================================ 
    -->
    <div id="main-site-wrapper">
        <!-- 
            AQUI COMEÇA EXATAMENTE O CONTEÚDO DO BODY DO SITE ANTIGO 
            Mantendo IDs, Classes e Estrutura Intactos para os Scripts funcionarem
        -->

        <!-- NOTIFICAÇÕES (Toast) -->
        <div id="toast-container" class="fixed top-4 right-4 z-50 flex flex-col gap-2"></div>

        <!-- FAB DO GESTOR -->
        <div id="manager-fab" class="hidden fixed top-24 right-4 z-[9999] group animate-fade-in-up">
            <button onclick="if((window.__fbDB || window.fbDB) && typeof openManagerPanel === 'function'){ openManagerPanel(); } else { alert('Aguarde o carregamento do sistema...'); }" 
                    class="flex items-center justify-center w-12 h-12 bg-purple-600 text-white rounded-full shadow-lg hover:bg-purple-500 hover:scale-110 transition-all duration-300 border-2 border-white/20">
                <i class="fas fa-chart-line text-xl"></i>
            </button>
            <span class="absolute right-14 top-1/2 -translate-y-1/2 bg-gray-900 text-white text-xs font-bold px-3 py-1.5 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none shadow-xl border border-white/10">
                Painel do Gestor
            </span>
        </div>

        <!-- OVERLAY DE CARREGAMENTO INICIAL -->
        <div id="app-loading-overlay" class="fixed inset-0 z-[100] bg-gray-900 flex items-center justify-center transition-opacity duration-500">
            <div class="text-center">
                <div class="w-16 h-16 border-4 border-red-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"></div>
                <h2 class="text-xl font-bold text-white tracking-widest animate-pulse">CARREGANDO SISTEMA</h2>
                <p class="text-gray-400 text-xs mt-2 font-mono">Autenticando credenciais...</p>
            </div>
        </div>

        <!-- SIDEBAR (Off-canvas) -->
        <div id="sidebar-overlay" class="fixed inset-0 bg-black/50 z-40 hidden backdrop-blur-sm transition-opacity"></div>
        <aside id="off-canvas-sidebar" class="fixed top-0 left-0 w-80 h-full bg-white dark:bg-darkCard shadow-2xl transform -translate-x-full transition-transform duration-300 z-50 flex flex-col border-r border-gray-200 dark:border-gray-800">
            <!-- Cabeçalho Sidebar -->
            <div class="p-6 bg-gradient-to-br from-gray-900 to-gray-800 text-white relative overflow-hidden shrink-0">
                <div class="absolute top-0 right-0 p-4 opacity-10">
                    <i class="fas fa-fire-extinguisher text-6xl transform rotate-12"></i>
                </div>
                
                <div class="flex items-center gap-4 relative z-10">
                    <div class="relative">
                        <div class="w-16 h-16 rounded-full bg-gray-700 border-2 border-red-500 overflow-hidden shadow-lg">
                            <img id="user-avatar-sidebar" src="https://ui-avatars.com/api/?name=Aluno&background=random" alt="Avatar" class="w-full h-full object-cover">
                        </div>
                        <div class="absolute bottom-0 right-0 w-4 h-4 bg-green-500 rounded-full border-2 border-gray-800" title="Online"></div>
                    </div>
                    <div>
                        <h3 id="user-name-sidebar" class="font-bold text-lg leading-tight">Aluno</h3>
                        <p class="text-xs text-gray-400 mt-1 flex items-center gap-1">
                            <i class="fas fa-id-badge"></i> <span id="user-cpf-sidebar">...</span>
                        </p>
                    </div>
                </div>

                <!-- Barra de Nível -->
                <div class="mt-4 relative z-10">
                    <div class="flex justify-between text-xs mb-1 font-mono text-gray-300">
                        <span>Nível 1</span>
                        <span id="xp-text-sidebar">0/1000 XP</span>
                    </div>
                    <div class="w-full bg-gray-700 rounded-full h-2 overflow-hidden">
                        <div id="xp-bar-sidebar" class="bg-gradient-to-r from-red-500 to-orange-500 h-2 rounded-full" style="width: 0%"></div>
                    </div>
                </div>
            </div>

            <!-- Navegação Sidebar -->
            <nav class="flex-1 overflow-y-auto py-4 custom-scrollbar">
                <div class="px-4 mb-2 text-xs font-bold text-gray-400 uppercase tracking-wider">Menu Principal</div>
                <ul class="space-y-1 px-2">
                    <li>
                        <button onclick="switchTab('dashboard')" class="w-full text-left px-4 py-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors flex items-center gap-3 text-gray-700 dark:text-gray-300 group">
                            <div class="w-8 h-8 rounded bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 flex items-center justify-center group-hover:scale-110 transition-transform">
                                <i class="fas fa-home"></i>
                            </div>
                            <span class="font-medium">Início</span>
                        </button>
                    </li>
                    <li>
                        <button onclick="switchTab('course')" class="w-full text-left px-4 py-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors flex items-center gap-3 text-gray-700 dark:text-gray-300 group">
                            <div class="w-8 h-8 rounded bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 flex items-center justify-center group-hover:scale-110 transition-transform">
                                <i class="fas fa-graduation-cap"></i>
                            </div>
                            <span class="font-medium">Módulos de Estudo</span>
                        </button>
                    </li>
                    <!-- NOVA ABA FERRAMENTAS -->
                    <li>
                        <button onclick="switchTab('tools')" class="w-full text-left px-4 py-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors flex items-center gap-3 text-gray-700 dark:text-gray-300 group">
                            <div class="w-8 h-8 rounded bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 flex items-center justify-center group-hover:scale-110 transition-transform">
                                <i class="fas fa-toolbox"></i>
                            </div>
                            <span class="font-medium">Ferramentas</span>
                        </button>
                    </li>
                    <li>
                        <button onclick="switchTab('simulados')" class="w-full text-left px-4 py-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors flex items-center gap-3 text-gray-700 dark:text-gray-300 group">
                            <div class="w-8 h-8 rounded bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400 flex items-center justify-center group-hover:scale-110 transition-transform">
                                <i class="fas fa-clipboard-check"></i>
                            </div>
                            <span class="font-medium">Simulados</span>
                        </button>
                    </li>
                    <li>
                        <button onclick="switchTab('survival')" class="w-full text-left px-4 py-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors flex items-center gap-3 text-gray-700 dark:text-gray-300 group">
                            <div class="w-8 h-8 rounded bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 flex items-center justify-center group-hover:scale-110 transition-transform">
                                <i class="fas fa-skull-crossbones"></i>
                            </div>
                            <span class="font-medium">Modo Sobrevivência</span>
                            <span class="ml-auto text-xs bg-orange-500 text-white px-2 py-0.5 rounded-full animate-pulse">HARD</span>
                        </button>
                    </li>
                </ul>

                <div class="px-4 mt-6 mb-2 text-xs font-bold text-gray-400 uppercase tracking-wider">Sistema</div>
                <ul class="space-y-1 px-2">
                    <li>
                        <button onclick="toggleDarkMode()" class="w-full text-left px-4 py-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors flex items-center gap-3 text-gray-700 dark:text-gray-300 group">
                            <div class="w-8 h-8 rounded bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-400 flex items-center justify-center group-hover:rotate-180 transition-transform duration-500">
                                <i class="fas fa-moon dark:hidden"></i>
                                <i class="fas fa-sun hidden dark:block text-yellow-400"></i>
                            </div>
                            <span class="font-medium">Modo Escuro</span>
                        </button>
                    </li>
                    <li>
                        <button onclick="logout()" class="w-full text-left px-4 py-3 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors flex items-center gap-3 text-red-600 dark:text-red-400 group">
                            <div class="w-8 h-8 rounded bg-red-100 dark:bg-red-900/30 flex items-center justify-center group-hover:translate-x-1 transition-transform">
                                <i class="fas fa-sign-out-alt"></i>
                            </div>
                            <span class="font-medium">Sair da Conta</span>
                        </button>
                    </li>
                </ul>
            </nav>

            <div class="p-4 border-t border-gray-200 dark:border-gray-800 text-center text-xs text-gray-500">
                <p>Versão 10.5 Beta</p>
                <p class="mt-1">&copy; 2024 Projeto Bravo Charlie</p>
            </div>
        </aside>

        <!-- CONTAINER PRINCIPAL -->
        <div id="main-container" class="min-h-screen flex flex-col transition-all duration-300">
            
            <!-- TOPBAR FIXA -->
            <header class="bg-white dark:bg-darkCard shadow-sm border-b border-gray-200 dark:border-gray-800 sticky top-0 z-30 h-16 flex items-center justify-between px-4">
                <div class="flex items-center gap-3">
                    <button id="menu-btn" class="w-10 h-10 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 flex items-center justify-center text-gray-600 dark:text-gray-300 transition-colors">
                        <i class="fas fa-bars text-lg"></i>
                    </button>
                    <h1 class="font-bold text-lg md:text-xl text-gray-800 dark:text-white tracking-tight">
                        <span class="text-red-600">Bravo</span>Charlie
                    </h1>
                </div>
                
                <div class="flex items-center gap-3">
                    <div class="hidden md:flex flex-col items-end mr-2">
                        <span class="text-xs font-bold text-gray-500 dark:text-gray-400">PROGRESSO GERAL</span>
                        <span id="progress-text" class="text-sm font-black text-brandOrange">0%</span>
                    </div>
                    <!-- Barra circular mobile -->
                    <div class="relative w-10 h-10 md:hidden flex items-center justify-center">
                        <svg class="w-full h-full transform -rotate-90">
                            <circle cx="20" cy="20" r="16" stroke="currentColor" stroke-width="3" fill="transparent" class="text-gray-200 dark:text-gray-700" />
                            <circle id="progress-ring-mobile" cx="20" cy="20" r="16" stroke="currentColor" stroke-width="3" fill="transparent" stroke-dasharray="100" stroke-dashoffset="100" class="text-brandOrange transition-all duration-1000" />
                        </svg>
                        <span id="progress-text-mobile" class="absolute text-[10px] font-bold text-gray-700 dark:text-gray-300">0%</span>
                    </div>
                </div>
            </header>

            <!-- ÁREA DE CONTEÚDO DINÂMICO -->
            <main id="content-area" class="flex-1 p-4 md:p-6 max-w-7xl mx-auto w-full">
                <!-- O CONTEÚDO SERÁ INJETADO AQUI PELO JAVASCRIPT (app_final.js) -->
                <!-- Este elemento precisa existir vazio para que o app_final.js funcione -->
            </main>

        </div>

        <!-- MODAL DE LOGIN (Inicial) -->
        <div id="login-overlay" class="fixed inset-0 z-[60] bg-black/90 backdrop-blur-sm hidden flex items-center justify-center p-4">
            <div id="login-modal" class="bg-white dark:bg-darkCard w-full max-w-md rounded-2xl shadow-2xl overflow-hidden transform transition-all scale-95 opacity-0 hidden border border-gray-700">
                <div class="p-8 text-center relative">
                    <div class="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-red-600 to-orange-500"></div>
                    
                    <div class="w-20 h-20 bg-gray-100 dark:bg-gray-800 rounded-full mx-auto mb-6 flex items-center justify-center shadow-inner">
                        <i class="fas fa-user-shield text-3xl text-red-600"></i>
                    </div>

                    <h2 class="text-2xl font-black text-gray-800 dark:text-white mb-2">IDENTIFICAÇÃO</h2>
                    <p class="text-gray-500 dark:text-gray-400 text-sm mb-6">Digite seu CPF para acessar o sistema.</p>
                    
                    <form id="login-form" class="space-y-4">
                        <div class="relative group">
                            <i class="fas fa-id-card absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 group-focus-within:text-brandOrange transition-colors"></i>
                            <input type="tel" id="cpf-input" class="w-full bg-gray-50 dark:bg-darkInput border border-gray-200 dark:border-gray-700 rounded-xl py-4 pl-12 pr-4 text-gray-800 dark:text-white font-mono placeholder-gray-400 focus:ring-2 focus:ring-brandOrange focus:border-transparent outline-none transition-all" placeholder="000.000.000-00" maxlength="14" required>
                        </div>
                        
                        <button type="submit" class="w-full bg-gradient-to-r from-red-600 to-orange-600 text-white font-bold py-4 rounded-xl shadow-lg hover:shadow-xl hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-2">
                            <span>ACESSAR PLATAFORMA</span>
                            <i class="fas fa-arrow-right"></i>
                        </button>
                    </form>

                    <p id="login-error" class="text-red-500 text-sm mt-4 font-bold hidden bg-red-100 dark:bg-red-900/20 py-2 rounded-lg animate-pulse"></p>
                </div>
                <div class="bg-gray-50 dark:bg-gray-800/50 p-4 text-center border-t border-gray-200 dark:border-gray-700">
                    <p class="text-xs text-gray-400">Acesso restrito a alunos matriculados.</p>
                </div>
            </div>

             <!-- Modal Expirado -->
             <div id="expired-modal" class="bg-white dark:bg-darkCard w-full max-w-md rounded-2xl shadow-2xl p-8 text-center hidden border-2 border-red-600">
                <i class="fas fa-calendar-times text-5xl text-red-600 mb-4"></i>
                <h2 class="text-2xl font-bold text-gray-800 dark:text-white mb-2">ACESSO EXPIRADO</h2>
                <p class="text-gray-600 dark:text-gray-300 mb-6">Seu período de acesso ao curso encerrou. Entre em contato com a secretaria para renovar.</p>
                <button onclick="window.location.reload()" class="bg-gray-800 text-white px-6 py-2 rounded-lg hover:bg-gray-700 transition">Voltar</button>
            </div>
        </div>

        <!-- FIREBASE SCRIPTS (Versão 8 compat) -->
        <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

        <!-- SEUS SCRIPTS ORIGINAIS (Importante: a ordem deve ser mantida) -->
        <script src="data.js"></script>
        <script src="quizzes.js"></script>
        <script src="course.js"></script>
        <script src="firebase-init.js"></script>
        <script src="tools_logic.js"></script>
        <script src="app_final.js"></script>

        <!-- Script do Chat Voiceflow (Mantido com correção de erro) -->
        <script type="text/javascript">
          (function(d, t) {
              var v = d.createElement(t), s = d.getElementsByTagName(t)[0];
              v.onload = function() {
                // Adicionando tratamento de erro robusto para o Voiceflow
                if (window.voiceflow && window.voiceflow.chat) {
                    window.voiceflow.chat.load({
                      verify: { projectID: '675b31e3ccb8931b64a38217' },
                      url: 'https://general-runtime.voiceflow.com',
                      versionID: 'production'
                    }).then(() => {
                        // --- PERSONALIZAÇÃO DO BOT ---
                        setTimeout(() => {
                            const chatHost = document.querySelector('voiceflow-chat');
                            if (chatHost && chatHost.shadowRoot) {
                                const style = document.createElement('style');
                                style.textContent = `
                                    .vfrc-launcher {
                                        background-color: transparent !important;
                                        box-shadow: none !important; 
                                        width: auto !important;
                                        height: auto !important;
                                        bottom: 20px !important; 
                                        right: 20px !important;
                                    }
                                    .vfrc-launcher img {
                                        width: 70px !important; 
                                        height: 70px !important;
                                        border-radius: 50% !important;
                                        border: 2px solid #ea580c !important; 
                                        box-shadow: 0 4px 15px rgba(234, 88, 12, 0.4) !important;
                                        transition: transform 0.3s ease !important;
                                    }
                                    .vfrc-launcher:hover img {
                                        transform: scale(1.1) !important;
                                    }
                                    @media (max-width: 768px) {
                                        .vfrc-launcher {
                                            bottom: 80px !important; 
                                        }
                                        .vfrc-chat--mobile {
                                            width: auto !important;
                                            height: auto !important;
                                            position: static !important;
                                        }
                                    }
                                    .vfrc-launcher:active, .vfrc-launcher:hover { opacity: 1 !important; }
                                `;
                                chatHost.shadowRoot.appendChild(style);
                            }
                        }, 500);
                    }).catch(err => {
                        console.warn("Voiceflow widget errored (Project ID inválido ou não encontrado):", err);
                    });
                }
              }
              v.src = "https://cdn.voiceflow.com/widget-next/bundle.mjs"; v.type = "text/javascript"; s.parentNode.insertBefore(v, s);
          })(document, 'script');
        </script>
    </div> <!-- Fim #main-site-wrapper -->

    <!-- 
    ================================================================
    SCRIPT LÓGICO DA FUSÃO (Rolagem e Carrossel)
    ================================================================ 
    -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            // --- LÓGICA DE ROLAGEM SUAVE AO CLICAR ---
            const introWrapper = document.getElementById('intro-carousel-wrapper');
            const mainSite = document.getElementById('main-site-wrapper');

            if(introWrapper && mainSite) {
                introWrapper.addEventListener('click', () => {
                    mainSite.scrollIntoView({ 
                        behavior: 'smooth',
                        block: 'start'
                    });
                });
            }

            // --- LÓGICA DO CARROSSEL (PRESERVADA) ---
            window.selectCourse = function(type) {
                // Redirecionamento visual (mantido console.log original)
                console.log(`Curso selecionado: ${type}`);
            };

            const track = document.getElementById('carousel-track');
            const prevBtn = document.getElementById('btn-prev');
            const nextBtn = document.getElementById('btn-next');
            
            if (track && prevBtn && nextBtn) {
                // --- 1. SETUP DO LOOP ---
                const originalItems = Array.from(track.children);
                
                // Duplicação para loop
                [...originalItems, ...originalItems].forEach(item => {
                    const clone = item.cloneNode(true);
                    clone.removeAttribute('id'); 
                    track.appendChild(clone);
                });

                // --- 2. VARIÁVEIS ---
                let currentX = 0;
                let speed = 0.3; 
                let isAnimating = true; 
                let itemWidth = 0;
                let totalOriginalWidth = 0;

                function calculateDimensions() {
                    const firstItem = track.children[0];
                    if(firstItem) {
                        itemWidth = firstItem.offsetWidth;
                        totalOriginalWidth = itemWidth * originalItems.length;
                    }
                }
                
                window.addEventListener('resize', calculateDimensions);
                setTimeout(calculateDimensions, 100);

                // --- 3. ANIMAÇÃO ---
                function animate() {
                    if (isAnimating) {
                        currentX -= speed;

                        if (Math.abs(currentX) >= totalOriginalWidth) {
                            currentX = 0;
                        }

                        track.style.transform = `translate3d(${currentX}px, 0, 0)`;
                    }
                    requestAnimationFrame(animate);
                }

                // Inicia animação
                requestAnimationFrame(animate);

                // --- 4. CONTROLE MANUAL ---
                function moveCarousel(direction) {
                    isAnimating = false; // Pausa momentânea
                    
                    const targetMove = direction === 'next' ? -itemWidth : itemWidth;
                    const startX = currentX;
                    const duration = 900; 
                    const startTime = performance.now();

                    function step(currentTime) {
                        const elapsed = currentTime - startTime;
                        const progress = Math.min(elapsed / duration, 1);
                        const ease = 1 - Math.pow(1 - progress, 4);
                        
                        currentX = startX + (targetMove * ease);
                        
                        if (Math.abs(currentX) >= totalOriginalWidth) {
                            if (direction === 'next') currentX += totalOriginalWidth;
                            else currentX -= totalOriginalWidth;
                        } 
                        else if (currentX > 0) {
                             currentX -= totalOriginalWidth;
                        }

                        track.style.transform = `translate3d(${currentX}px, 0, 0)`;

                        if (progress < 1) {
                            requestAnimationFrame(step);
                        } else {
                            isAnimating = true; // Retoma
                        }
                    }
                    
                    requestAnimationFrame(step);
                }

                nextBtn.addEventListener('click', () => moveCarousel('next'));
                prevBtn.addEventListener('click', () => moveCarousel('prev'));
            }
        });
    </script>
</body>
</html>
